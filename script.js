// ===== Translations =====
const translations = {
  en: {
    // Navbar
    subscription: "Subscription",
    deals: "Deals",
    signIn: "Sign in, Accounts, and Lists",
    returns: "Returns & Orders",
    cart: "Cart",
    searchPlaceholder: "Search products",
    searchButton: "Search",

    // Footer
    backToTop: "Back to top",
    getToKnowUs: "Get to Know Us",
    careers: "Careers",
    blog: "Blog",
    about: "About TradeNest",
    investorRelations: "Investor Relations",
    devices: "TradeNest Devices",
    science: "TradeNest Science",
    makeMoney: "Make Money with Us",
    sellProducts: "Sell products on TradeNest",
    sellBusiness: "Sell on TradeNest Business",
    sellApps: "Sell apps on TradeNest",
    becomeAffiliate: "Become an Affiliate",
    advertise: "Advertise Your Products",
    selfPublish: "Self-Publish with Us",
    hostHub: "Host a TradeNest Hub",
    seeMore: "› See More Make Money with Us",
    paymentProducts: "TradeNest Payment Products",
    businessCard: "TradeNest Business Card",
    shopPoints: "Shop with Points",
    reloadBalance: "Reload Your Balance",
    currencyConverter: "TradeNest Currency Converter",
    letUsHelp: "Let Us Help You",
    covid: "TradeNest and COVID-19",
    account: "Your Account",
    orders: "Your Orders",
    shipping: "Shipping Rates & Policies",
    returnsReplacements: "Returns & Replacements",
    manageDevices: "Manage Your Content and Devices",
    help: "Help",
    language: "English",
    currency: "$USD - U.S. Dollar",
    country: "United States",
  },
  fr: {
    // Navbar
    subscription: "Abonnement",
    deals: "Offres",
    signIn: "Connexion, Comptes et Listes",
    returns: "Retours et Commandes",
    cart: "Panier",
    searchPlaceholder: "Rechercher des produits",
    searchButton: "Rechercher",

    // Footer
    backToTop: "Retour en haut",
    getToKnowUs: "Faites notre connaissance",
    careers: "Carrières",
    blog: "Blog",
    about: "À propos de TradeNest",
    investorRelations: "Relations avec les investisseurs",
    devices: "Appareils TradeNest",
    science: "Science TradeNest",
    makeMoney: "Gagnez de l'argent avec nous",
    sellProducts: "Vendez des produits sur TradeNest",
    sellBusiness: "Vendez sur TradeNest Business",
    sellApps: "Vendez des applications sur TradeNest",
    becomeAffiliate: "Devenez un affilié",
    advertise: "Annoncez vos produits",
    selfPublish: "Auto-publiez avec nous",
    hostHub: "Hébergez un hub TradeNest",
    seeMore: "› Voir plus pour gagner de l'argent avec nous",
    paymentProducts: "Produits de paiement TradeNest",
    businessCard: "Carte professionnelle TradeNest",
    shopPoints: "Achetez avec des points",
    reloadBalance: "Rechargez votre solde",
    currencyConverter: "Convertisseur de devises TradeNest",
    letUsHelp: "Laissez-nous vous aider",
    covid: "TradeNest et COVID-19",
    account: "Votre compte",
    orders: "Vos commandes",
    shipping: "Tarifs et politiques d'expédition",
    returnsReplacements: "Retours et remplacements",
    manageDevices: "Gérez votre contenu et vos appareils",
    help: "Aide",
    language: "Français",
    currency: "$USD - Dollar américain",
    country: "États-Unis",
  },
  es: {
    // Spanish translations
    subscription: "Suscripción",
    deals: "Ofertas",
    signIn: "Iniciar sesión, Cuentas y Listas",
    returns: "Devoluciones y Pedidos",
    cart: "Carrito",
    searchPlaceholder: "Buscar productos",
    searchButton: "Buscar",

    // Footer
    backToTop: "Volver arriba",
    getToKnowUs: "Conócenos",
    careers: "Carreras",
    blog: "Blog",
    about: "Acerca de TradeNest",
    investorRelations: "Relaciones con inversionistas",
    devices: "Dispositivos TradeNest",
    science: "Ciencia TradeNest",
    makeMoney: "Gana dinero con nosotros",
    sellProducts: "Vende productos en TradeNest",
    sellBusiness: "Vende en TradeNest Business",
    sellApps: "Vende aplicaciones en TradeNest",
    becomeAffiliate: "Conviértete en afiliado",
    advertise: "Anuncia tus productos",
    selfPublish: "Auto-publica con nosotros",
    hostHub: "Aloja un centro TradeNest",
    seeMore: "› Ver más para ganar dinero con nosotros",
    paymentProducts: "Productos de pago TradeNest",
    businessCard: "Tarjeta de negocios TradeNest",
    shopPoints: "Compra con puntos",
    reloadBalance: "Recarga tu saldo",
    currencyConverter: "Conversor de moneda TradeNest",
    letUsHelp: "Permítenos ayudarte",
    covid: "TradeNest y COVID-19",
    account: "Tu cuenta",
    orders: "Tus pedidos",
    shipping: "Tarifas y políticas de envío",
    returnsReplacements: "Devoluciones y reemplazos",
    manageDevices: "Gestiona tu contenido y dispositivos",
    help: "Ayuda",
    language: "Español",
    currency: "$USD - Dólar estadounidense",
    country: "Estados Unidos",
  },
  de: {
    // German translations
    subscription: "Abonnement",
    deals: "Angebote",
    signIn: "Anmelden, Konten und Listen",
    returns: "Rückgaben und Bestellungen",
    cart: "Warenkorb",
    searchPlaceholder: "Produkte suchen",
    searchButton: "Suchen",

    // Footer
    backToTop: "Nach oben",
    getToKnowUs: "Lernen Sie uns kennen",
    careers: "Karriere",
    blog: "Blog",
    about: "Über TradeNest",
    investorRelations: "Investor Relations",
    devices: "TradeNest-Geräte",
    science: "TradeNest Wissenschaft",
    makeMoney: "Geld verdienen mit uns",
    sellProducts: "Produkte auf TradeNest verkaufen",
    sellBusiness: "Auf TradeNest Business verkaufen",
    sellApps: "Apps auf TradeNest verkaufen",
    becomeAffiliate: "Partner werden",
    advertise: "Werben Sie Ihre Produkte",
    selfPublish: "Selbst veröffentlichen mit uns",
    hostHub: "Hosten Sie einen TradeNest-Hub",
    seeMore: "› Mehr erfahren, um Geld zu verdienen",
    paymentProducts: "TradeNest-Zahlungsprodukte",
    businessCard: "TradeNest-Business-Karte",
    shopPoints: "Mit Punkten einkaufen",
    reloadBalance: "Guthaben aufladen",
    currencyConverter: "TradeNest-Währungsumrechner",
    letUsHelp: "Lassen Sie uns Ihnen helfen",
    covid: "TradeNest und COVID-19",
    account: "Ihr Konto",
    orders: "Ihre Bestellungen",
    shipping: "Versandkosten und -richtlinien",
    returnsReplacements: "Rückgaben und Ersatz",
    manageDevices: "Verwalten Sie Ihre Inhalte und Geräte",
    help: "Hilfe",
    language: "Deutsch",
    currency: "$USD - US-Dollar",
    country: "Vereinigte Staaten",
  },
  it: {
    // Italian translations
    subscription: "Abbonamento",
    deals: "Offerte",
    signIn: "Accedi, Account e Liste",
    returns: "Resi e Ordini",
    cart: "Carrello",
    searchPlaceholder: "Cerca prodotti",
    searchButton: "Cerca",

    // Footer
    backToTop: "Torna su",
    getToKnowUs: "Conosciaci",
    careers: "Carriere",
    blog: "Blog",
    about: "Informazioni su TradeNest",
    investorRelations: "Relazioni con gli investitori",
    devices: "Dispositivi TradeNest",
    science: "Scienza TradeNest",
    makeMoney: "Guadagna con noi",
    sellProducts: "Vendi prodotti su TradeNest",
    sellBusiness: "Vendi su TradeNest Business",
    sellApps: "Vendi app su TradeNest",
    becomeAffiliate: "Diventa un affiliato",
    advertise: "Pubblica i tuoi prodotti",
    selfPublish: "Auto-pubblica con noi",
    hostHub: "Ospita un hub TradeNest",
    seeMore: "› Scopri di più per guadagnare con noi",
    paymentProducts: "Prodotti di pagamento TradeNest",
    businessCard: "Carta aziendale TradeNest",
    shopPoints: "Acquista con punti",
    reloadBalance: "Ricarica il tuo saldo",
    currencyConverter: "Convertitore di valuta TradeNest",
    letUsHelp: "Lascia che ti aiutiamo",
    covid: "TradeNest e COVID-19",
    account: "Il tuo account",
    orders: "I tuoi ordini",
    shipping: "Tariffe e politiche di spedizione",
    returnsReplacements: "Resi e sostituzioni",
    manageDevices: "Gestisci contenuti e dispositivi",
    help: "Aiuto",
    language: "Italiano",
    currency: "$USD - Dollaro statunitense",
    country: "Stati Uniti",
  },
};

// ===== Update Language Function =====
function updateLanguage(lang) {
  const translation = translations[lang];

  // Navbar
  document.querySelector(".nav-links li:nth-child(1) a").textContent = translation.subscription;
  document.querySelector(".nav-links li:nth-child(2) a").textContent = translation.deals;
  document.querySelector(".nav-links li:nth-child(3) a").textContent = translation.signIn;
  document.querySelector(".nav-links li:nth-child(4) a").textContent = translation.returns;
  document.querySelector(".nav-links li:nth-child(5) a").textContent = translation.cart;
  document.querySelector(".search-bar-inline input").placeholder = translation.searchPlaceholder;
  document.querySelector(".search-bar-inline button").textContent = translation.searchButton;

  // Footer
  document.querySelector(".footer-back-to-top a").textContent = translation.backToTop;
  document.querySelector(".footer-column:nth-child(1) h3").textContent = translation.getToKnowUs;
  document.querySelector(".footer-column:nth-child(1) ul li:nth-child(1) a").textContent = translation.careers;
  document.querySelector(".footer-column:nth-child(1) ul li:nth-child(2) a").textContent = translation.blog;
  document.querySelector(".footer-column:nth-child(1) ul li:nth-child(3) a").textContent = translation.about;
  document.querySelector(".footer-column:nth-child(1) ul li:nth-child(4) a").textContent = translation.investorRelations;
  document.querySelector(".footer-column:nth-child(1) ul li:nth-child(5) a").textContent = translation.devices;
  document.querySelector(".footer-column:nth-child(1) ul li:nth-child(6) a").textContent = translation.science;

  document.querySelector(".footer-column:nth-child(2) h3").textContent = translation.makeMoney;
  document.querySelector(".footer-column:nth-child(2) ul li:nth-child(1) a").textContent = translation.sellProducts;
  document.querySelector(".footer-column:nth-child(2) ul li:nth-child(2) a").textContent = translation.sellBusiness;
  document.querySelector(".footer-column:nth-child(2) ul li:nth-child(3) a").textContent = translation.sellApps;
  document.querySelector(".footer-column:nth-child(2) ul li:nth-child(4) a").textContent = translation.becomeAffiliate;
  document.querySelector(".footer-column:nth-child(2) ul li:nth-child(5) a").textContent = translation.advertise;
  document.querySelector(".footer-column:nth-child(2) ul li:nth-child(6) a").textContent = translation.selfPublish;
  document.querySelector(".footer-column:nth-child(2) ul li:nth-child(7) a").textContent = translation.hostHub;
  document.querySelector(".footer-column:nth-child(2) ul li:nth-child(8) a").textContent = translation.seeMore;

  document.querySelector(".footer-column:nth-child(3) h3").textContent = translation.paymentProducts;
  document.querySelector(".footer-column:nth-child(3) ul li:nth-child(1) a").textContent = translation.businessCard;
  document.querySelector(".footer-column:nth-child(3) ul li:nth-child(2) a").textContent = translation.shopPoints;
  document.querySelector(".footer-column:nth-child(3) ul li:nth-child(3) a").textContent = translation.reloadBalance;
  document.querySelector(".footer-column:nth-child(3) ul li:nth-child(4) a").textContent = translation.currencyConverter;

  document.querySelector(".footer-column:nth-child(4) h3").textContent = translation.letUsHelp;
  document.querySelector(".footer-column:nth-child(4) ul li:nth-child(1) a").textContent = translation.covid;
  document.querySelector(".footer-column:nth-child(4) ul li:nth-child(2) a").textContent = translation.account;
  document.querySelector(".footer-column:nth-child(4) ul li:nth-child(3) a").textContent = translation.orders;
  document.querySelector(".footer-column:nth-child(4) ul li:nth-child(4) a").textContent = translation.shipping;
  document.querySelector(".footer-column:nth-child(4) ul li:nth-child(5) a").textContent = translation.returnsReplacements;
  document.querySelector(".footer-column:nth-child(4) ul li:nth-child(6) a").textContent = translation.manageDevices;
  document.querySelector(".footer-column:nth-child(4) ul li:nth-child(7) a").textContent = translation.help;

  document.querySelector(".footer-language span:nth-child(1)").textContent = translation.language;
  document.querySelector(".footer-language span:nth-child(2)").textContent = translation.currency;
  document.querySelector(".footer-language span:nth-child(3)").textContent = translation.country;
}

// ===== DOMContentLoaded Event =====
document.addEventListener("DOMContentLoaded", () => {
  // ===== Carousel Functionality =====
  const slides = document.querySelectorAll(".carousel-slide");
  const prevBtn = document.querySelector(".carousel-arrow.prev");
  const nextBtn = document.querySelector(".carousel-arrow.next");
  let currentIndex = 0;

  // Show the current slide
  function showSlide(index) {
    slides.forEach((slide, i) => {
      slide.classList.remove("active");
      if (i === index) {
        slide.classList.add("active");
      }
    });
  }

  // Go to the next slide
  nextBtn.addEventListener("click", () => {
    currentIndex = (currentIndex + 1) % slides.length; // Loop back to the first slide
    showSlide(currentIndex);
  });

  // Go to the previous slide
  prevBtn.addEventListener("click", () => {
    currentIndex = (currentIndex - 1 + slides.length) % slides.length; // Loop back to the last slide
    showSlide(currentIndex);
  });

  // Initialize the carousel
  showSlide(currentIndex);

  // ===== Language Dropdown Functionality =====
  const selectedLanguage = document.getElementById('selected-language');
  const languageBox = document.getElementById('language-box');
  const overlay = document.getElementById('overlay');
  const languageOptions = document.querySelectorAll('.language-option');

  if (selectedLanguage && languageBox && overlay) {
    // Toggle dropdown and overlay visibility
    selectedLanguage.addEventListener('click', (e) => {
      e.stopPropagation(); // Prevent event from bubbling up
      languageBox.classList.toggle('visible');
      overlay.classList.toggle('visible');
    });

    // Close dropdown and overlay when clicking outside
    document.addEventListener('click', (e) => {
      if (!selectedLanguage.contains(e.target) && !languageBox.contains(e.target)) {
        languageBox.classList.remove('visible');
        overlay.classList.remove('visible');
      }
    });

    // Update selected language when a language option is clicked
    languageOptions.forEach(option => {
      option.addEventListener('click', () => {
        const langCode = option.getAttribute('data-lang'); // Get language code (e.g., "en", "fr")
        const flagSrc = option.querySelector('.flag-icon').src; // Get flag image source

        // Update selected language display
        const selectedFlag = selectedLanguage.querySelector('.flag-icon');
        const selectedText = selectedLanguage.querySelector('.language-text');

        selectedFlag.src = flagSrc; // Update flag
        selectedText.textContent = langCode.toUpperCase(); // Update language code (e.g., "FRA")

        // Update the entire website text
        updateLanguage(langCode);

        // Close the dropdown and overlay
        languageBox.classList.remove('visible');
        overlay.classList.remove('visible');
      });
    });
  } else {
    console.error("One or more elements are missing in the DOM.");
  }

  // ===== Cart Button Functionality =